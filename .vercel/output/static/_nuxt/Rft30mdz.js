import N from"./B3X8K9mg.js";import{n as P,O as V,r as y,z as A,o as B,c as x,a as t,t as n,b as z,v as T,s as I,u as c,B as M,d as O,_ as S}from"./iurotYuZ.js";const U={class:"planet-name"},F={class:"planet-info"},H={class:"biome"},J={class:"players"},L=P({__name:"planetCard",props:{planet:{}},async setup(w){var f,u,_;let s,i;const a=w,C=V(()=>{if(a.planet.expireDateTime){const e=a.planet.expireDateTime||0,p=new Date(e*1e3-24*60*60*1e3).getTime(),o=new Date().getTime()-p,r=e*1e3-p;return Math.min(100*o/r,100)}else return 0}),m=y(!1),d=y(!1),l=((f=a.planet)==null?void 0:f.defense)===1,E=([s,i]=A(()=>{var e;return JSON.parse((e=a.planet)==null?void 0:e.biome)}),s=await s,i(),s);return m.value=((u=a.planet)==null?void 0:u.faction)==="Terminids",d.value=((_=a.planet)==null?void 0:_.faction)==="Automatons",(e,p)=>{var r,g,D,h,v,b,k;const o=N;return B(),x("div",{class:T(["planet-card-container",{terminid:c(m),automaton:c(d)}])},[t("div",U,[t("h3",null,n(((r=e.planet)==null?void 0:r.name)||"Unknown planet"),1)]),z(o,{class:T(["attack-progress-bar",{"defense-progress-bar":l}]),progress:(g=e.planet)==null?void 0:g.percentage,faction:(D=e.planet)==null?void 0:D.faction},null,8,["class","progress","faction"]),l?(B(),I(o,{key:0,class:"defense-progress-bar",progress:c(C),faction:(h=e.planet)==null?void 0:h.faction},null,8,["progress","faction"])):M("",!0),t("p",null,[t("strong",null,n(Math.trunc((v=e.planet)==null?void 0:v.percentage)||0)+"%",1),O(" "+n(l?"DEFENDED":"LIBERATED"),1)]),t("div",F,[t("p",H,"Biome: "+n(((b=c(E))==null?void 0:b.slug)||"Unknown"),1),t("p",J,n(((k=e.planet)==null?void 0:k.players)||0)+" active Helldivers",1)])],2)}}}),q=S(L,[["__scopeId","data-v-18e1f248"]]);export{q as P};
